## Cookie의 등장

HTTP의 가장 큰 특징으로 **무상태성**과, **비연결성**이다. 홈페이지에서 로그인을 하고, 새로 고침을 하면 로그인이 풀린 상태가 된다.<br>
HTTP는 클라이언트가 요청을 하면 서버에 응답을 합니다. 응답이 끝나면 연결이 끝나게 됩니다. 
따라서 클라이언트에는 이전 통신 상태가 남아있지 않게 됩니다.<BR>
서버가 다수의 클라이언트랑 연결을 계속 유지하면, 자원이 낭비가 됩니다.
이러한 문제점을 해결하기 위해 Cookie가 등장하였다.<br>


## Cookie

* Cookie는 사용자가 어떠한 웹사이트를 방문할 경우 사용자의 웹 브라우저를 통해 인터넷 사용자의 컴퓨터나 다른 기기에 설치되는 작은 기록 정보 파일을 의미합니다.

![](/Network/img/cookie_method.png)

* 서버는 클라이언트의 로그인 요청에 대한 응답을 작성할 때, 클라이언트 측에 저장하고 싶은 정보를 응답 헤더의 `Set-Cookie`에 담아 전달합니다.

* 쿠키는 Key-Value 형식을 저장됩니다.

* 이후 해당 클라이언트는 요청을 보낼 때마다, 매번 저장된 쿠키를 요청 헤더의 `Cookie`에 담아 보냅니다.

* 서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 클라이언트가 누군지 식별한다.

## 단점

- 보안에 취약함
  - 쿠키의 값이 브라우저에서 확인할 수 있어, 유출 및 조작 당할 위험이 존재
- 쿠키에는 용량 제한이 있어 많은 정보를 담을 수 없음
- 웹 브라우저마다 쿠키에 대한 지원 형태가 다르기 때문에 브라우저 간 공유가 불가능
- 쿠키의 사이즈가 커질수록 네트워크에 부하가 심해짐

## Session의 등장

쿠키의 가장 큰 단점의 사용자의 정보가 그대로 노출이 된다는 점이다.<br>
이러한 점을 해결하기위해 세션이 등장한다.<br>
<img src="https://joie-kim.github.io/assets/210206/Session_auth.jpeg">
세션은 기존에 쿠키에 저장된 사용자의 정보를 서버의 메모리에 저장이 되고, 그때 생성되는 id를 쿠키에 담어서 전달한다<br>
클라이언트가 요청을 보낼 때 쿠키에 있는 id를 전달한다.<br>
서버는 id의 유효성을 판별해 클라이언트를 식별한다.<br>
Session의 정보는 사용자가 브라우저를 종류하면 삭제된다.<br>

## 장단점

- 쿠키를 포함한 요청이 외부에 노출되더라도 세션 ID 자체는 유의미한 개인정보를 담고 있지 않는다.
  - 그러나 세션의 id로 해커가 서버에 접근하면 사용자의 정보에 쉽게 접근할수 있다.
- 각 사용자마다 고유한 세션 ID가 발급되지 때문에, 요청이 들어올 때마다 회원 정보를 확인 할 필요 없음
- 서버의 메모리를 사용하므로 요청이 많아지면, 서버에 부하가 심해짐


## 면접 질문

**✅쿠키와 세션에 대해 차이점을 말해주세요**<br><br>
쿠키는 브라우저에서 저장이 되지만, 세션은 서버에 저장이 됩니다.<br>
쿠키는 브라우저를 종료를 해도 다시 사이트에 접속해도 정보가 남아있지만, 세션은 브라우저를 종료하면 정보가 삭제됩니다.<br>


**✅쿠키와 세션이 필요한 이유가 무엇인가요?**<br><br>
HTTP는 클라이턴가 요청을 하고, 서버가 응답을 하면 연결이 종료가 됩니다.<br> 그점을 통해
서버는 많은 리소스를 절약할 수 있지만, 그때 가지고 있던 정보도 사라져서 다시 사이트에 접속을
할때, 그 데이터를 다시 받아와야 됩니다. <br>이점을 해결을 하기 위해 쿠키가 만들었졌습니다.
쿠키는 데이터를 직접적으로 클라이언트에 저장이 되기 때문에 보안에 취약점을 가지고 있습니다. <br>그러한 점을 보완하기 때문에 세션이 만들어졌습니다.
세션은 서버의 메모리에 사용자가 필요한 정보가 저장합니다. 그 때 생성된 데이터의 id가 쿠키에 전달됩니다.


## 참고 자료

[튜나의 개발일지](https://devuna.tistory.com/23) - [web] 쿠키(cookie)와 세션(session)의 개념/차이/용도/작동방식<br>
[우아한 테크 코스 블로그](https://tecoble.techcourse.co.kr/post/2021-05-22-cookie-session-jwt/) - 인증 방식 : Cookie & Session vs JWT<br>
[joie-kim의 깃헙 블로그](https://joie-kim.github.io/Session-Auth/) - Session 기반 인증 방식
